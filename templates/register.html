<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Create Account - DR Analyzer</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
  <style>
    :root {
        --primary: #0066cc; --secondary: #0ea5ff; --bg: #f0f4f8;
    }
    body { 
        font-family: 'Inter', sans-serif; 
        background: radial-gradient(circle at top left, #e0e7ff, #f8fafc);
        margin: 0; display: flex; align-items: center; justify-content: center; min-height: 100vh; overflow: hidden;
    }
    .container { 
        width: 100%; max-width: 440px; padding: 20px; 
        animation: slideUp 0.8s cubic-bezier(0.2, 0.8, 0.2, 1);
    }
    .card { 
        background: rgba(255, 255, 255, 0.85); backdrop-filter: blur(12px);
        border-radius: 24px; padding: 40px; 
        box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.08); 
        border: 1px solid rgba(255, 255, 255, 0.4);
    }
    h1 { margin: 0 0 10px; font-size: 32px; color: var(--primary); font-weight: 800; letter-spacing: -1px; }
    p.lead { color: #64748b; margin-bottom: 30px; font-size: 15px; }
    
    label { display: block; font-weight: 600; margin-bottom: 8px; color: #475569; font-size: 14px; }
    input { 
        width: 100%; padding: 14px; border: 2px solid #e2e8f0; border-radius: 14px; 
        margin-bottom: 20px; font-size: 15px; transition: all 0.3s; box-sizing: border-box;
        background: rgba(255,255,255,0.5);
    }
    input:focus { outline: none; border-color: var(--secondary); background: #fff; box-shadow: 0 0 0 4px rgba(14, 165, 255, 0.1); }
    
    .btn { 
        width: 100%; padding: 15px; border-radius: 14px; 
        background: linear-gradient(135deg, var(--secondary), var(--primary)); 
        color: #fff; border: none; font-weight: 700; cursor: pointer; font-size: 16px;
        box-shadow: 0 10px 20px -5px rgba(0, 102, 204, 0.3); transition: all 0.3s;
    }
    .btn:hover { transform: translateY(-2px); box-shadow: 0 15px 25px -5px rgba(0, 102, 204, 0.4); }
    
    .small-line { text-align: center; margin-top: 25px; color: #64748b; font-size: 14px; }
    .small-line a { color: var(--primary); font-weight: 700; text-decoration: none; transition: 0.2s; }
    .small-line a:hover { text-decoration: underline; }

    /* Flash Messages */
    .flash { padding: 12px; border-radius: 12px; margin-bottom: 20px; font-size: 14px; font-weight: 600; text-align: center; }
    .flash-danger { background: #fee2e2; color: #991b1b; border: 1px solid #fecaca; }

    @keyframes slideUp {
        from { opacity: 0; transform: translateY(40px); }
        to { opacity: 1; transform: translateY(0); }
    }

    /* Password strength indicator (Visual Only) */
    .strength { height: 4px; width: 100%; background: #e2e8f0; margin-top: -15px; margin-bottom: 20px; border-radius: 2px; overflow: hidden; }
    .strength-bar { height: 100%; width: 0%; background: var(--good); transition: width 0.3s; }
  </style>
</head>
<body>
  <div class="container">
    <div class="card">
      <h1>Join Us</h1>
      <p class="lead">Create an account to start your DR analysis.</p>

      {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            {% for category, message in messages %}
                <div class="flash flash-{{ category }}">{{ message }}</div>
            {% endfor %}
        {% endif %}
      {% endwith %}

      <form id="regForm" action="{{ url_for('register') }}" method="POST">
        <label for="username">Choose Username</label>
        <input id="username" name="username" type="text" required>

        <label for="password">Create Password</label>
        <input id="password" name="password" type="password" required>
        <div class="strength"><div class="strength-bar" id="bar"></div></div>

        <button id="regBtn" class="btn" type="submit">Create Account</button>
      </form>

      <div class="small-line">
        Already have an account? 
        <a href="{{ url_for('home') }}">Login here</a>
      </div>
    </div>
  </div>

  <script>
    const passInput = document.getElementById('password');
    const bar = document.getElementById('bar');
    const form = document.getElementById('regForm');
    const btn = document.getElementById('regBtn');

    // Smooth button interaction
    form.addEventListener('submit', () => {
      btn.style.opacity = '0.7';
      btn.textContent = 'Creating Account...';
    });

    // Simple visual password strength
    passInput.addEventListener('input', (e) => {
        const val = e.target.value;
        let width = val.length * 10;
        if(width > 100) width = 100;
        bar.style.width = width + '%';
        bar.style.background = width < 50 ? '#ef4444' : (width < 80 ? '#f59e0b' : '#10b981');
    });
  </script>
</body>
</html>